# Ensure CMake supports FetchContent
cmake_minimum_required(VERSION 3.16)

idf_component_register(
    SRCS 
      "components/core/ArduinoUtils/ArduinoGPIO.cpp"
      "components/core/ArduinoUtils/ArduinoTime.cpp"
      "components/core/ArduinoUtils/ArduinoWString.cpp"
      "components/core/ArduinoUtils/ArduinoStdlibNonISO.c"
      "components/core/ArPreferences/ArPreferences.cpp"
      "components/core/CommsChannelMsg/CommsChannelMsg.cpp"
      "components/core/Config/ConfigBase.cpp"
      "components/core/Config/ConfigMulti.cpp"
      "components/core/Config/ConfigNVS.cpp"
      "components/core/Config/RdJsmn.cpp"
      "components/core/Config/RdJson.cpp"
      "components/core/ConfigPinMap/ConfigPinMap.cpp"
      "components/core/DebounceButton/DebounceButton.cpp"
      "components/core/ExpressionEval/ExpressionEval.cpp"
      "components/core/ExpressionEval/ExpressionContext.cpp"
      "components/core/ExpressionEval/tinyexpr.c"
      "components/core/FileSystem/FileSystem.cpp"
      "components/core/FileSystem/FileSystemChunker.cpp"
      "components/core/libb64/cencode.cpp"
      "components/core/Logger/LoggerCore.cpp"
      "components/core/MiniHDLC/MiniHDLC.cpp"
      "components/core/NetworkSystem/NetworkSystem.cpp"
      "components/core/NetworkSystem/WiFiScanner.cpp"
      "components/core/RestAPIEndpoints/RestAPIEndpointManager.cpp"
      "components/core/StatusIndicator/StatusIndicator.cpp"
      "components/core/SupervisorStats/SupervisorStats.cpp"
      "components/core/SysMod/SysModBase.cpp"
      "components/core/SysManager/SysManager.cpp"
      "components/core/SysTypes/SysTypeManager.cpp"
      "components/core/Utils/RaftUtils.cpp"
      "components/core/Utils/ESPUtils.cpp"
      "components/comms/ProtocolRawMsg/ProtocolRawMsg.cpp"
      "components/comms/ProtocolBase/ProtocolBase.cpp"
      "components/comms/RICRESTMsg/RICRESTMsg.cpp"
      "components/comms/ProtocolRICSerial/ProtocolRICSerial.cpp"
      "components/comms/ProtocolRICFrame/ProtocolRICFrame.cpp"
      "components/comms/ProtocolRICJSON/ProtocolRICJSON.cpp"
      "components/comms/ProtocolOverAscii/ProtocolOverAscii.cpp"
      "components/comms/FileStreamProtocols/FileStreamBase.cpp"
      "components/comms/FileStreamProtocols/FileUploadOKTOProtocol.cpp"
      "components/comms/FileStreamProtocols/FileUploadHTTPProtocol.cpp"
      "components/comms/FileStreamProtocols/StreamDatagramProtocol.cpp"
    INCLUDE_DIRS
      "components/core/APICommon"
      "components/core/ArduinoUtils"
      "components/core/ArPreferences"
      "components/core/CommsChannelMsg"
      "components/core/CommsCoreIF"
      "components/core/Config"
      "components/core/ConfigPinMap"
      "components/core/DebounceButton"
      "components/core/ExpressionEval"
      "components/core/FileSystem"
      "components/core/libb64"
      "components/core/Logger"
      "components/core/MiniHDLC"
      "components/core/NetCoreIF"
      "components/core/NetworkSystem"
      "components/core/NumericalFilters"
      "components/core/RestAPIEndpoints"
      "components/core/RingBuffer"
      "components/core/StatusIndicator"
      "components/core/SupervisorStats"
      "components/core/SysMod"
      "components/core/SysManager"
      "components/core/SysTypes"
      "components/core/ThreadSafeQueue"
      "components/core/Utils"
      "components/comms/ProtocolRawMsg"
      "components/comms/ProtocolBase"
      "components/comms/RICRESTMsg"
      "components/comms/ProtocolRICSerial"
      "components/comms/ProtocolRICFrame"
      "components/comms/ProtocolRICJSON"
      "components/comms/ProtocolOverAscii"
      "components/comms/FileStreamProtocols"
    REQUIRES
      nvs_flash
      driver
      vfs
      spiffs
      fatfs
      sdmmc
      esp_wifi
      esp_eth      
    )
